#!/bin/bash
function check_rc(){
        rc=$?
        echo ---------------------------------------
        if [[ $rc != 0 ]];
        then
                echo $1 ' FAILURE!'
                exit $rc
        else
                echo $1 ' SUCCESS!'
        fi
        echo ---------------------------------------
}

./parse_checklist.py -f Historic_Checklists/Error\ Management\ Checklist.xml -r 1.3 -o Historic_Checklists/ErrorManagementChecklist_optional.txt > Historic_Checklists/ErrorManagementChecklist.txt
check_rc 'Parse ErrorManagementChecklist'
./parse_checklist.py -f Historic_Checklists/Data\ Streaming\ Checklist.xml -r 1.3 > Historic_Checklists/DataStreamingChecklist.txt
check_rc 'Parse DataStreamingChecklist'
./parse_checklist.py -f Historic_Checklists/rev1_3_rio_chklist.xml -r 1.3 -o Historic_Checklists/rev1_3_rio_chklist_optional.txt > Historic_Checklists/rev1_3_rio_chklist.txt
check_rc 'Parse Rev1.3'
./parse_checklist.py -f Historic_Checklists/rapidio_interop_checklist_rev2_2.xml -r 2.2 -p 6 -t -o Historic_Checklists/rapidio_interop_checklist_rev2_2_optional.txt > Historic_Checklists/rapidio_interop_checklist_rev2_2.txt
check_rc 'Parse Rev2.2Part6'
./merge_checklists.py -c Historic_Checklists/ErrorManagementChecklist.txt -c Historic_Checklists/DataStreamingChecklist.txt -c Historic_Checklists/rev1_3_rio_chklist.txt -c Historic_Checklists/rapidio_interop_checklist_rev2_2.txt -o Standards/outline_1.3.txt  -o Standards/outline_2.2.txt  -t Standards/translate_1.3to2.2.txt -t Standards/translate_2.2to3.2.txt -t Standards/translate_3.2to4.0.txt -r Standards/reqts_2.2.txt -r Standards/reqts_3.2.txt -m Standards/manual_reqts_3.2.txt -r Standards/reqts_4.0.txt -m Standards/manual_reqts_4.0.txt > Historic_Checklists/merged_sorted_checklist.txt
check_rc 'MERGE all checklists'
./update_checklist_db.py -c Historic_Checklists/merged_sorted_checklist.txt -d Historic_Checklists/merged_sorted_db.txt > Historic_Checklists/merged_sorted_db2.txt
check_rc 'UPDATE database'
mv Historic_Checklists/merged_sorted_db2.txt Historic_Checklists/merged_sorted_db.txt
check_rc 'Moved database file'
